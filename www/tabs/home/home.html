<!-- Header Bar -->
<ion-header-bar align-title="center" class="bar-positive">
  <div class="buttons">
    <button class="button button-icon icon ion-arrow-left-b" ng-click="doSomething()"></button>
  </div>
  <h1 class="title">Home</h1>
  <div class="buttons">
    <button class="button button-icon icon ion-map" ui-sref="footprints-map"></button>
  </div>
</ion-header-bar>

<ion-view title="Home">

  <ion-content class="padding">

    <!-- Search bar -->
    <div class="list list-inset">
      <label class="item item-input">
        <i class="icon ion-ios7-search-strong placeholder-icon"></i>
        <input type="text" placeholder="Search footprints" ng-model="search">
      </label>
    </div>

    <!-- <div class="list card"> -->
      <!-- <a class="item item-icon-left" href="#"> -->
        <!-- <i class="icon ion-ios7-search-strong"></i> -->
        <!-- <input class="icon ion-ios7-search-strong" type="search" ng-model="search" placeholder="Search your footprints"> -->
      <!-- </a> -->
    <!-- </div> -->

    <div ng-repeat="footprint in footprints | filter:search" class="list card">

      <div class="item item-avatar">

        <!-- Profile Picture -->
        <img ng-click='loadProfilePage(footprint.user)' ng-src='{{footprint.user.fbProfilePicture}}'>

        <!-- User Name -->
        <a href="#" class="subdued">{{footprint.user.name}}</a>
        <br>
        <!-- Place Name -->
        <a ng-click="getFootprint(footprint)">
          {{footprint.place.name}}
        </h2>

        <!-- Check-in Time -->
        <p>{{footprint.checkin.checkinTime | date : shortDate}}</p>
      </div>

      <div class="item item-body">
        <img ng-if="footprint.checkin.photoLarge !== 'null'" ng-click="getFootprint(footprint)" class="full-image" ng-src="{{footprint.checkin.photoLarge}}">
        <p ng-if="footprint.checkin.caption !== 'null'">{{footprint.checkin.caption}}</p>

        <img ng-if="footprint.checkin.photoLarge === 'null'" ng-if="footprint.checkin.caption === 'null'" class="full-image defaultpeng" ng-click="getFootprint(footprint)" ng-src="https://s3-us-west-2.amazonaws.com/waddle/WaddlePenguinLogo.png"/>
        <p ng-if="footprint.checkin.caption !== 'null' && footprint.checkin.photoLarge === 'null'">"{{footprint.checkin.caption}}"</p>

        <p>
          <a ng-if="footprint.comments.length > 0" ui-sref="tab.comments" ng-click="openFootprint(footprint)" class="subdued">{{ footprint.comments.length }} Comments</a>
          <a ng-if="footprint.hypes.length > 0"  ui-sref="tab.hypers" ng-click="openFootprint(footprint)" class="subdued">{{ footprint.hypes.length }} Hypes</a>
        </p>
      </div>

      <div class="item tabs tabs-secondary tabs-icon-left">
        <a class="tab-item" ng-click="addCheckinToBucketList({{ footprint }})">
          <i class="icon ion-arrow-up-a"></i>
          Hype
        </a>
        <a class="tab-item" ui-sref="tab.comments">
          <i class="icon ion-chatbox"></i>
          Comment
        </a>
      </div>

    </div>

          <!-- Hype Button -->
<!--           <button class="button button-small" ng-click="addCheckinToBucketList({{ footprint }})">
            <i class="icon ion-arrow-up-a"></i>
          </button> -->
      <!-- </div> -->
      <!-- <div class="item item-body"> -->
        <!-- Photo & Caption -->
<!--         <img ng-if="footprint.checkin.photoLarge !== 'null'" ng-click="getFootprint(footprint)" class="full-image" ng-src="{{footprint.checkin.photoLarge}}">
        <p ng-if="footprint.checkin.caption !== 'null'">{{footprint.checkin.caption}}</p> -->

        <!-- Default Photo (if no photo) -->
<!--         <div ng-if="footprint.checkin.photoLarge === 'null'" ng-if="footprint.checkin.caption === 'null'" class='captioncontainer'>
          <img class="full-image defaultpeng" ng-click="getFootprint(footprint)" ng-src="https://s3-us-west-2.amazonaws.com/waddle/WaddlePenguinLogo.png"/>
          <h4 ng-if="footprint.checkin.caption !== 'null' && footprint.checkin.photoLarge === 'null'">"{{footprint.checkin.caption}}"</h4>
        </div> -->

      <!-- List of hypers -->
<!--       <div ng-if="footprint.hypes.length > 0" class="item item-divider">
        <div class="row">
          <i class="icon ion-arrow-up-a"></i>
          <p ng-repeat="hyper in footprint.hypes">{{ hyper.name }}</p>
        </div>
      </div> -->

      <!-- Comments -->
<!--       <div ng-repeat="comment in footprint.comments | orderBy:'comment.time'" class="item item-avatar">  
        <img ng-src='{{comment.commenter.fbProfilePicture}}'>
        <h2>{{comment.commenter.name}}</h2>
        <p>{{comment.comment.text}}</p>
        <p>{{comment.comment.time | date : shortDate}}<P>
      </div> -->

      <!-- Add Comment -->
<!--       <form name="customSubmit" data-custom-submit info='someinfo' class='comment_form' novalidate>
        <input ng-model='comment' name='comment' placeholder='Leave a comment' data-ng-minlength="1" data-ng-maxlength="120" required>
        <span class="help-inline" ng-show="customSubmit.comment.$error.maxlength">120 Character Max</span>
      </form> -->

    <!-- Not bucketed -->
    <!-- <img ng-if="!footprint.checkin.bucketed" class='addbucket feedactions' title="Add to Bucket List" ng-click="addCheckinToBucketList(footprint)"/> -->
    <!-- Bucketed -->
    <!-- <img ng-if="footprint.checkin.bucketed" class='addbucketactive feedactions' title="Add to Bucket List" ng-click="removeCheckinFromBucketList(footprint)"/> -->

  <!-- </div> -->

  <ion-infinite-scroll
    on-infinite="getAggregatedFeedData()"
    ng-if="moreDataCanBeLoaded"
    distance="10%">
  </ion-infinite-scroll>

  </ion-content>
</ion-view>